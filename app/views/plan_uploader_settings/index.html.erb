<% html_title 'Настройки полей' %>

<%= toolbar title: 'Настройки полей' do %>
  <li class="toolbar-item">
    <%= link_to new_plan_uploader_setting_path,
                { class: 'button -alt-highlight',
                  aria: {label: 'Новое поле'},
                  title: 'Новое поле'} do %>
      <%= op_icon('button--icon icon-add') %>
      <span class="button--text">Новое поле</span>
    <% end %>
  </li>
<% end %>


<%= form_tag({}) do -%>

  <div class="generic-table--container">
    <div class="generic-table--results-container">
      <table class="generic-table" id="plan_uploader_settings_items">
        <colgroup>
          <col highlight-col>
          <col highlight-col>
          <col highlight-col>
          <col highlight-col>
          <col highlight-col>
        </colgroup>
        <thead>
        <tr>
          <th>
            <%= PlanUploaderSetting.human_attribute_name(:id) %>
          </th>
          <th>
            <%= PlanUploaderSetting.human_attribute_name(:column_num) %>
          </th>
          <th>
            <%= PlanUploaderSetting.human_attribute_name(:column_name) %>
          </th>
          <th>
            <%= PlanUploaderSetting.human_attribute_name(:is_pk) %>
          </th>
          <th>
            Действия
          </th>
        </tr>
        </thead>
        <tbody>
        <% @plan_uploader_settings.each do |setting| %>
          <tr id="setting-<%= setting.id %>">
            <%= content_tag(:td, link_to(h(setting.id), edit_plan_uploader_setting_path(setting.id))) %>
            <%= content_tag(:td, setting.column_num) %>
            <%= content_tag(:td, setting.column_name) %>
            <%= content_tag(:td, setting.is_pk) %>
            <%= content_tag(:td, link_to(
                op_icon('icon icon-delete'),
                plan_uploader_settings_path(setting),
                method: :delete,
                data: {confirm: I18n.t(:text_are_you_sure)},
                title: t(:button_delete))) %>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>

<% end -%>
