<div class="work-package--details--long-field work-packages--activity--add-comment hide-when-print">
  <!--<div>-->
    <!--<wp-target [workPackageId]="workPackageId" [workPackage]="workPackage" ></wp-target>-->
  <!--</div>-->

  <div>
    <!--<wp-target-create [workPackage]="workPackage" [wpTargets]="wpTargets" [wpTargetIds]="wpTargetIds">-->
    <!--</wp-target-create>-->

    <div class="wp-relations-create">
      <div class="wp-relations-create-button hide-when-print"
           *ngIf="!showTargetsCreateForm">
        <div class="grid-block">
          <div class="grid-content collapse wp-inline-create-button">
            <a class="wp-inline-create--add-link relation-create"
               #focusAfterSave
               (accessibleClick)="toggleTargetsCreateForm()"
               href
               id="relation--add-relation">
              <op-icon icon-classes="icon icon-add"></op-icon>
              <span [textContent]="text.addNewTarget"></span>
            </a>
          </div>
        </div>
      </div>
      <div class="loading-indicator--location"
           data-indicator-name="relationAddDynamic">
        <div class="v-align wp-relations-create--form"
             *ngIf="showTargetsCreateForm">
          <div class="grid-content medium-7">
            <wp-target-autocomplete
                    [workPackage]="workPackage"
                    (onTargetIdSelected)="updateSelectedId($event)"
                    appendToContainer=".work-packages-tab-view--overflow">
            </wp-target-autocomplete>
            <br/>
            <table>
              <tr>
                <th>Год</th>
                <th>Квартал</th>
                <th>Месяц</th>
                <th>Плановое значение</th>
                <th>Фактическое значение</th>
              </tr>
              <tr>
                <td>
                  <select name="year" [(ngModel)]="year">
                    <option value="2019">2019</option>
                    <option value="2020">2020</option>
                  </select>
                </td>
                <td>
                  <select name="quarter" [(ngModel)]="quarter">
                    <option value="" selected="selected"></option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                  </select>
                </td>
                <td>
                  <select name="month" [(ngModel)]="month">
                    <option value="" selected="selected"></option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                  </select>
                </td>
                <td>
                  <input type="text" name="plan_value" [(ngModel)]="plan_value"/>
                </td>
                <td>
                  <input type="text" name="value" [(ngModel)]="value"/>
                </td>
              </tr>
            </table>
          </div>
          <div class="grid-content medium-2 collapse wp-relations-controls-section relation-row">
            <accessible-by-keyboard
                    (execute)="createTarget()"
                    [isDisabled]="isDisabled || !selectedTgId"
                    linkClass="wp-create-relation--save"
                    aria-hidden="false">
              <op-icon icon-classes="icon-checkmark -padded" [icon-title]="text.save"></op-icon>
            </accessible-by-keyboard>
            <accessible-by-keyboard
                    (execute)="toggleTargetsCreateForm()"
                    linkClass="wp-create-relation--cancel"
                    aria-hidden="false">
              <op-icon icon-classes="icon-remove -padded" [icon-title]="text.abort"></op-icon>
            </accessible-by-keyboard>
          </div>
        </div>
      </div>
    </div>


    <div>
      <style type="text/css">
        table { width: 100%; }
        td.colA { width: 20%; }
        td.colB { width: 25%; }
        th.colA { width: 20%; }
      </style>
      <ul *ngFor="let targetId of wpTargetIds">
        <li>
          <div>
            <h4>{{ targetId }} - {{ wpTargets[targetId].name }}</h4>
            <table class="table table-striped">
              <thead>
                <tr>
                  <th class="colA">Год</th>
                  <th class="colA">Квартал</th>
                  <th class="colA">Месяц</th>
                  <th class="colA">Плановое значение</th>
                  <th class="colA">Фактическое значение</th>
                  <th></th>
                </tr>
              </thead>
            </table>
            <table *ngFor="let value of wpTargets" style="border: 1px;">
              <tbody>
              <tr *ngIf="value.wp_target_id === targetId">
                <td class="colA">{{ value.year }}</td>
                <td class="colA">{{ value.quarter }}</td>
                <td class="colA">{{ value.month }}</td>
                <td class="colA">{{ value.plan_value }}</td>
                <td class="colA">{{ value.value }}</td>
                <td>
                  <accessible-by-keyboard (execute)="deleteTarget(value)"
                                          aria-hidden="false"
                                          [linkAriaLabel]="text.removeButton"
                                          [linkTitle]="text.removeButton"
                                          linkClass="relation-row--remove-btn">
                    <op-icon icon-classes="icon-remove -padded wp-relations--icon" [icon-title]="text.removeButton"></op-icon>
                  </accessible-by-keyboard>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </li>
      </ul>

    </div>
  </div>


</div>

